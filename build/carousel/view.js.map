{"version":3,"file":"carousel/view.js","mappings":"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","sources":["webpack://demo-carousel/external module \"@wordpress/interactivity\"","webpack://demo-carousel/webpack/bootstrap","webpack://demo-carousel/webpack/runtime/make namespace object","webpack://demo-carousel/./src/carousel/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store } from '@wordpress/interactivity';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Find all carousel wrappers having our interactive data attributes.\n  const wrappers = document.querySelectorAll('[data-wp-interactive=\"squareonesoftware\"][data-wp-context]');\n  // Global registry to store each carousel's store if needed.\n  window.carouselStores = {};\n\n  wrappers.forEach((wrapper) => {\n    const carouselId = wrapper.getAttribute('id');\n    let phpContext = {};\n    try {\n      phpContext = JSON.parse(wrapper.getAttribute('data-wp-context'));\n    } catch (e) {\n      console.error(`Error parsing PHP context for carousel ${carouselId}:`, e);\n    }\n\n    // Set up initial state merging defaults with PHP provided context.\n    const initialState = Object.assign(\n      {\n        currentIndex: 0,\n        transform: 'translateX(0%)',\n        isTransitioning: false,\n        itemsTotal: 0,\n        clonesCount: 0,\n        itemsPerView: 3,\n        scroll: 1,\n        loop: true,\n        slideWidth: null,\n      },\n      phpContext\n    );\n\n    // Adjust the initial index if looping.\n    if (initialState.loop) {\n      initialState.currentIndex = initialState.clonesCount;\n    }\n\n    // Create a unique store for this carousel instance.\n    const { state, actions } = store('squareonesoftware-' + carouselId, {\n      actions: {\n        moveForward() {\n          if (state.isTransitioning) return;\n          state.isTransitioning = true;\n          state.currentIndex += state.scroll;\n          doTransform();\n        },\n        moveBack() {\n          if (state.isTransitioning) return;\n          state.isTransitioning = true;\n          state.currentIndex -= state.scroll;\n          doTransform();\n        },\n      },\n      state: initialState,\n    });\n\n    // Save the store so we can reference it if needed.\n    window.carouselStores[carouselId] = { state, actions };\n\n    // Get the carousel track and container within this wrapper.\n    const carouselTrack = wrapper.querySelector('.carousel-track');\n    const carouselContainer = wrapper.querySelector('.carousel-container');\n    if (!carouselTrack || !carouselContainer) return;\n\n    // Handle seamless looping after transition.\n    carouselTrack.addEventListener('transitionend', () => {\n      state.isTransitioning = false;\n      // If we've reached the end, reset to the proper index.\n      if (state.currentIndex >= state.itemsTotal + state.clonesCount) {\n        carouselTrack.style.transition = 'none';\n        state.currentIndex = state.currentIndex - state.itemsTotal;\n        doTransform();\n        requestAnimationFrame(() => {\n          carouselTrack.offsetHeight; // Force reflow.\n          carouselTrack.style.transition = 'transform 0.3s ease-out';\n        });\n      }\n      // If we've reached the beginning, reset to the proper index.\n      else if (state.currentIndex < state.clonesCount) {\n        carouselTrack.style.transition = 'none';\n        state.currentIndex = state.currentIndex + state.itemsTotal;\n        doTransform();\n        requestAnimationFrame(() => {\n          carouselTrack.offsetHeight; // Force reflow.\n          carouselTrack.style.transition = 'transform 0.3s ease-out';\n        });\n      }\n    });\n\n    // Function to calculate and apply the transform based on the current index.\n    function doTransform() {\n      const isMobile = window.innerWidth <= 760;\n      if (isMobile) {\n        const slideWidthPercent = 74.0740740741;\n        const offsetPercentage = slideWidthPercent * state.currentIndex;\n        carouselTrack.style.transform = `translateX(-${offsetPercentage}%)`;\n        carouselContainer.classList.add('mobile-partial-view');\n      } else {\n        const slideWidthPercent = 100 / (state.itemsPerView - 0.3);\n        const offsetPercentage = slideWidthPercent * state.currentIndex;\n        carouselTrack.style.transform = `translateX(-${offsetPercentage}%)`;\n        carouselContainer.classList.remove('mobile-partial-view');\n      }\n    }\n\n    // Initial carousel setup.\n    carouselTrack.style.transition = 'none';\n    doTransform();\n    carouselTrack.offsetHeight; // Force reflow.\n    setTimeout(() => {\n      carouselTrack.style.transition = 'transform 0.3s ease-out';\n    }, 50);\n\n    // Responsive resize handling.\n    window.addEventListener('resize', doTransform);\n\n    // Touch swipe navigation.\n    let startX = 0;\n    let currentX = 0;\n    let isSwiping = false;\n    const swipeThreshold = 50;\n\n    carouselTrack.addEventListener('touchstart', (e) => {\n      if (!e.touches || !e.touches.length) return;\n      startX = e.touches[0].clientX;\n      currentX = startX;\n      isSwiping = true;\n    });\n\n    carouselTrack.addEventListener('touchmove', (e) => {\n      if (!isSwiping || !e.touches || !e.touches.length) return;\n      currentX = e.touches[0].clientX;\n    });\n\n    carouselTrack.addEventListener('touchend', () => {\n      if (!isSwiping) return;\n      isSwiping = false;\n      const deltaX = currentX - startX;\n      if (Math.abs(deltaX) > swipeThreshold) {\n        if (deltaX < 0) {\n          actions.moveForward();\n        } else {\n          actions.moveBack();\n        }\n      }\n    });\n\n    // Mouse drag navigation.\n    let isDragging = false;\n    let mouseStartX = 0;\n    let mouseCurrentX = 0;\n    const dragThreshold = 50;\n\n    carouselTrack.addEventListener('mousedown', (e) => {\n      e.preventDefault();\n      isDragging = true;\n      mouseStartX = e.clientX;\n      mouseCurrentX = mouseStartX;\n    });\n\n    carouselTrack.addEventListener('mousemove', (e) => {\n      if (!isDragging) return;\n      mouseCurrentX = e.clientX;\n    });\n\n    carouselTrack.addEventListener('mouseup', () => {\n      if (!isDragging) return;\n      isDragging = false;\n      const deltaX = mouseCurrentX - mouseStartX;\n      if (Math.abs(deltaX) > dragThreshold) {\n        if (deltaX < 0) {\n          actions.moveForward();\n        } else {\n          actions.moveBack();\n        }\n      }\n    });\n\n    // Handle case when mouse leaves the track while dragging.\n    carouselTrack.addEventListener('mouseleave', () => {\n      if (isDragging) {\n        isDragging = false;\n        const deltaX = mouseCurrentX - mouseStartX;\n        if (Math.abs(deltaX) > dragThreshold) {\n          if (deltaX < 0) {\n            actions.moveForward();\n          } else {\n            actions.moveBack();\n          }\n        }\n      }\n    });\n\n    // Navigation button event bindings (found within the same wrapper).\n    const prevButton = wrapper.querySelector('.carousel-prev[data-carousel-id]');\n    if (prevButton) {\n      prevButton.addEventListener('click', () => {\n        actions.moveBack();\n      });\n    }\n    const nextButton = wrapper.querySelector('.carousel-next[data-carousel-id]');\n    if (nextButton) {\n      nextButton.addEventListener('click', () => {\n        actions.moveForward();\n      });\n    }\n  });\n});"],"names":["store","document","addEventListener","wrappers","querySelectorAll","window","carouselStores","forEach","wrapper","carouselId","getAttribute","phpContext","JSON","parse","e","console","error","initialState","Object","assign","currentIndex","transform","isTransitioning","itemsTotal","clonesCount","itemsPerView","scroll","loop","slideWidth","state","actions","moveForward","doTransform","moveBack","carouselTrack","querySelector","carouselContainer","style","transition","requestAnimationFrame","offsetHeight","isMobile","innerWidth","slideWidthPercent","offsetPercentage","classList","add","remove","setTimeout","startX","currentX","isSwiping","swipeThreshold","touches","length","clientX","deltaX","Math","abs","isDragging","mouseStartX","mouseCurrentX","dragThreshold","preventDefault","prevButton","nextButton"],"sourceRoot":""}