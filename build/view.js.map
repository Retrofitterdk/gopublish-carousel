{"version":3,"file":"view.js","mappings":"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","sources":["webpack://demo-carousel/external module \"@wordpress/interactivity\"","webpack://demo-carousel/webpack/bootstrap","webpack://demo-carousel/webpack/runtime/make namespace object","webpack://demo-carousel/./src/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store } from '@wordpress/interactivity';\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  // Target the carousel element using a more specific selector.\n  const contextElem = document.querySelector('[data-wp-interactive=\"squareonesoftware\"][data-wp-context]');\n  let phpContext = {};\n  \n  if (contextElem) {\n    const contextData = contextElem.getAttribute('data-wp-context');\n    console.log(\"Raw PHP context attribute:\", contextData);\n    try {\n      phpContext = JSON.parse(contextData);\n      console.log(\"Parsed PHP context:\", phpContext);\n    } catch (e) {\n      console.error(\"Error parsing PHP context:\", e);\n    }\n  } else {\n    console.warn(\"No carousel element with data-wp-interactive and data-wp-context found.\");\n  }\n  \n  // Merge PHP context into default state values\n  const initialState = Object.assign({\n    currentIndex: 0,\n    transform: 'translateX(0%)',\n    itemsTotal: 0,\n    itemsPerView: 3,\n    clonesCount: 0,\n    scroll: 1,\n    loop: false,\n    isTransitioning: false\n  }, phpContext);\n\n  // Initialize the store with our merged state\n  const { state } = store('squareonesoftware', {\n    actions: {\n      moveForward() {\n        if (state.isTransitioning) return;\n        \n        const total = state.itemsTotal;\n        const clones = state.clonesCount;\n        const perView = state.itemsPerView;\n        const scroll = state.scroll;\n        console.log(\"Before moveForward:\", {\n          currentIndex: state.currentIndex,\n          total,\n          clones,\n          perView,\n          scroll\n        });\n\n        // Increase index by scroll amount\n        state.currentIndex += scroll;\n        state.isTransitioning = true;\n\n        if (state.loop && state.currentIndex >= total) {\n          // Calculate the actual visual position\n          state.transform = `translateX(-${state.currentIndex * (100 / perView)}%)`;\n          updateCarouselTrack();\n\n          const carouselTrack = document.querySelector('.carousel-track');\n          carouselTrack.addEventListener('transitionend', function handler() {\n            // Disable transition for immediate jump\n            carouselTrack.style.transition = 'none';\n            \n            // Jump to the equivalent position at the beginning (after clones)\n            state.currentIndex = clones + (state.currentIndex - total);\n            state.transform = `translateX(-${state.currentIndex * (100 / perView)}%)`;\n            carouselTrack.style.transform = state.transform;\n            \n            // Force reflow\n            carouselTrack.offsetHeight;\n            \n            // Re-enable transition\n            setTimeout(() => {\n              carouselTrack.style.transition = 'transform 0.3s ease-out';\n              state.isTransitioning = false;\n            }, 20);\n            \n            carouselTrack.removeEventListener('transitionend', handler);\n            console.log(\"Looped to corresponding real slide:\", {\n              jumpedTo: state.currentIndex,\n              transform: state.transform\n            });\n          });\n        } else {\n          state.transform = `translateX(-${state.currentIndex * (100 / perView)}%)`;\n          updateCarouselTrack();\n          \n          // Reset the transitioning state after animation completes\n          const carouselTrack = document.querySelector('.carousel-track');\n          carouselTrack.addEventListener('transitionend', function handler() {\n            state.isTransitioning = false;\n            carouselTrack.removeEventListener('transitionend', handler);\n          });\n        }\n        \n        console.log(\"After moveForward:\", {\n          currentIndex: state.currentIndex,\n          transform: state.transform\n        });\n      },\n\n      moveBack() {\n        if (state.isTransitioning) return;\n        \n        const total = state.itemsTotal;\n        const clones = state.clonesCount;\n        const perView = state.itemsPerView;\n        const scroll = state.scroll;\n        console.log(\"Before moveBack:\", {\n          currentIndex: state.currentIndex,\n          total,\n          clones,\n          perView,\n          scroll\n        });\n\n        // Decrease index by scroll amount\n        state.currentIndex -= scroll;\n        state.isTransitioning = true;\n\n        if (state.loop && state.currentIndex < clones) {\n          // Normal movement before looping jump\n          state.transform = `translateX(-${state.currentIndex * (100 / perView)}%)`;\n          updateCarouselTrack();\n\n          const carouselTrack = document.querySelector('.carousel-track');\n          carouselTrack.addEventListener('transitionend', function handler() {\n            // Disable transition for immediate jump\n            carouselTrack.style.transition = 'none';\n            \n            // Jump to the equivalent position at the end\n            state.currentIndex = total + state.currentIndex;\n            state.transform = `translateX(-${state.currentIndex * (100 / perView)}%)`;\n            carouselTrack.style.transform = state.transform;\n            \n            // Force reflow\n            carouselTrack.offsetHeight;\n            \n            // Re-enable transition\n            setTimeout(() => {\n              carouselTrack.style.transition = 'transform 0.3s ease-out';\n              state.isTransitioning = false;\n            }, 20);\n            \n            carouselTrack.removeEventListener('transitionend', handler);\n            console.log(\"Looped to corresponding real slide:\", {\n              jumpedTo: state.currentIndex,\n              transform: state.transform\n            });\n          });\n        } else {\n          state.transform = `translateX(-${state.currentIndex * (100 / perView)}%)`;\n          updateCarouselTrack();\n          \n          // Reset the transitioning state after animation completes\n          const carouselTrack = document.querySelector('.carousel-track');\n          carouselTrack.addEventListener('transitionend', function handler() {\n            state.isTransitioning = false;\n            carouselTrack.removeEventListener('transitionend', handler);\n          });\n        }\n        \n        console.log(\"After moveBack:\", {\n          currentIndex: state.currentIndex,\n          transform: state.transform\n        });\n      }\n    },\n    state: initialState\n  });\n  \n  // Expose state globally for debugging.\n  window.carouselState = state;\n  \n  // Helper to update the carousel track's transform.\n  function updateCarouselTrack() {\n    const carouselTrack = document.querySelector('.carousel-track');\n    if (carouselTrack) {\n      carouselTrack.style.transform = state.transform;\n      console.log(\"Carousel track updated to:\", state.transform);\n    }\n  }\n  \n  // Set the initial transform based on the merged state\n  const carouselTrack = document.querySelector('.carousel-track');\n  if (carouselTrack) {\n    if (state.loop) {\n      // Start at the first real slide (after clones)\n      state.currentIndex = state.clonesCount;\n    }\n    // Disable transition on load to avoid auto-scroll flicker\n    carouselTrack.style.transition = 'none';\n    state.transform = `translateX(-${state.currentIndex * (100 / state.itemsPerView)}%)`;\n    carouselTrack.style.transform = state.transform;\n    carouselTrack.offsetHeight; // Force reflow\n    // Re-enable transition after initial load\n    setTimeout(() => {\n      carouselTrack.style.transition = 'transform 0.3s ease-out';\n    }, 50);\n    console.log(\"Initial carousel track transform set to:\", state.transform, \"currentIndex:\", state.currentIndex);\n  } else {\n    console.warn(\"Carousel track element not found on initial load.\");\n  }\n});"],"names":["store","document","addEventListener","contextElem","querySelector","phpContext","contextData","getAttribute","console","log","JSON","parse","e","error","warn","initialState","Object","assign","currentIndex","transform","itemsTotal","itemsPerView","clonesCount","scroll","loop","isTransitioning","state","actions","moveForward","total","clones","perView","updateCarouselTrack","carouselTrack","handler","style","transition","offsetHeight","setTimeout","removeEventListener","jumpedTo","moveBack","window","carouselState"],"sourceRoot":""}